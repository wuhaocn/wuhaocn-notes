## 1.ç³»ç»Ÿä»‹ç»

å¤œèºï¼ˆ Nightingale ï¼‰æ˜¯ä¸€æ¬¾å›½äº§å¼€æºã€äº‘åŸç”Ÿç›‘æ§ç³»ç»Ÿï¼ŒNightingale åœ¨ 2020.3.20 å‘å¸ƒ v1 ç‰ˆæœ¬ï¼Œç›®å‰æ˜¯ v5 ç‰ˆæœ¬ï¼Œä»è¿™ä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œä¸ Prometheusã€VictoriaMetricsã€Grafanaã€Telegrafã€Datadog ç­‰ç”Ÿæ€åšäº†ååŒé›†æˆï¼ŒåŠ›äº‰æ‰“é€ å›½å†…æœ€å¥½ç”¨çš„å¼€æºè¿ç»´ç›‘æ§ç³»ç»Ÿã€‚å‡ºè‡ª Open-Falcon ç ”å‘å›¢é˜Ÿã€‚
![](https://cdn.nlark.com/yuque/0/2022/jpeg/804884/1652429549803-0da0e6f5-52b9-40e3-b00f-a8bbe601f313.jpeg)

- æ–‡æ¡£å‚è€ƒ
   - v4: [http://n9e.didiyun.com/docs/intro/](http://n9e.didiyun.com/docs/intro/)
   - v5ï¼š[https://n9e.github.io/](https://n9e.github.io/)
- ä»£ç 
   - åç«¯ï¼š[ğŸ’¡ https://github.com/didi/nightingale](https://github.com/didi/nightingale)
   - å‰ç«¯ï¼š[ğŸ’¡ https://github.com/n9e/fe-v5](https://github.com/n9e/fe-v5)
## 2. ä½¿ç”¨ä»‹ç»

### 2.1 åŠŸèƒ½è¯´æ˜
ä¸šåŠ¡åŠŸèƒ½ä¸»è¦åŒ…æ‹¬

- ç›‘æ§å¤§ç›˜
- å‘Šè­¦è§„åˆ™
- å‘Šè­¦å†å²
- ç»„ç»‡ç®¡ç†
- å¯¹è±¡ç®¡ç†

æŸ¥çœ‹ç›‘æ§æ•°æ®ï¼Œå³ç›‘æ§å¤§ç›˜é¡µé¢ï¼š
[![image.png](https://cdn.nlark.com/yuque/0/2022/png/804884/1652006671782-05759d22-9c5e-4714-a5ab-6c8b9e494bac.png#clientId=u4bdb46ff-3cd5-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=uf2ec4626&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1742&originWidth=3830&originalType=url&ratio=1&rotation=0&showTitle=false&size=389168&status=done&style=none&taskId=ud46e408a-0d76-425b-8b63-0935543ce27&title=)](https://n9e.github.io/intro/dashboard.png)
é…ç½®å‘Šè­¦è§„åˆ™çš„åˆ—è¡¨é¡µé¢ï¼š
[![image.png](https://cdn.nlark.com/yuque/0/2022/png/804884/1652006670641-0f2bcdc4-68f1-47ad-9c91-f6ad3fb1a6c8.png#clientId=u4bdb46ff-3cd5-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u6dd81894&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1716&originWidth=3824&originalType=url&ratio=1&rotation=0&showTitle=false&size=633654&status=done&style=none&taskId=u2c5f4b75-801c-40af-919d-c18b7d8eea7&title=)](https://n9e.github.io/intro/alert-rules.png)
æ´»è·ƒå‘Šè­¦åˆ—è¡¨é¡µé¢ï¼Œå³å½“å‰æœªæ¢å¤çš„å‘Šè­¦é¡µé¢ï¼š
[![image.png](https://cdn.nlark.com/yuque/0/2022/png/804884/1652006671818-edfc974f-980b-40e7-9190-3278a88848b1.png#clientId=u4bdb46ff-3cd5-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u34fe6d2f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1730&originWidth=3830&originalType=url&ratio=1&rotation=0&showTitle=false&size=530041&status=done&style=none&taskId=u16cb1774-6648-4bd1-839a-c9a20df4828&title=)](https://n9e.github.io/intro/alert-events.png)
## 3.è¯¦ç»†ä»‹ç»
### 3.1 å‘Šè­¦ä½¿ç”¨
#### 3.1.1 å‘Šè­¦é…ç½®æ­¥éª¤

   - step1.PromSQLæµ‹è¯•(ç›‘æ§çœ‹å›¾.å³æ—¶æŸ¥è¯¢æ¨¡å—)
   - step2.æ·»åŠ è§„åˆ™(å‘Šè­¦ç®¡ç†.å‘Šè­¦è§„åˆ™)
   - step3.å±è”½è§„åˆ™
      - step3.1 ï¼ˆå‘Šè­¦ç®¡ç†.å†å²å‘Šè­¦).ä¸‹æ–¹å±è”½
#### 3.1.2 å‘Šè­¦é…ç½®è§„èŒƒ

   - è§„åˆ™æ ‡é¢˜
      - è§„åˆ™ï¼šæ•°æ®ä¸­å¿ƒ-ä¸šåŠ¡-å‘Šè­¦ç±»å‹(é˜ˆå€¼å‘Šè­¦)-æè¿°
      - ç¤ºä¾‹ï¼šåŒ—äº¬-é”™è¯¯æ—¥å¿—-é˜ˆå€¼å‘Šè­¦-ã€é”™è¯¯æ—¥å¿—å¤§äº10æ¡/sã€‘
   - è§„åˆ™å¤‡æ³¨ï¼š
      - è§„åˆ™æ ‡é¢˜ + æè¿°
   - å‘Šè­¦çº§åˆ«
      - å»ºè®®é€‰æ‹©ä¸‰çº§å‘Šè­¦
   - æ‰§è¡Œé¢‘ç‡
      - 30
   - æ‰§è¡Œæ—¶é•¿
      - 100
   - é¢„æ¡ˆè¿æ¥
      - å¡«å†™å‘Šè­¦æ ‡å‡†å¤„ç†æµç¨‹
   - ç”Ÿæ•ˆé…ç½®
      - é‡‡ç”¨é»˜è®¤
   - é€šçŸ¥é…ç½®
      - é€šçŸ¥åª’ä»‹
         - å¯ä¸å‹¾é€‰
      - æ¢å¤é€šçŸ¥
         - é€‰æ‹©ä¸å¯ç”¨
      - é‡å¤å‘é€é¢‘ç‡
         - 5åˆ†é’Ÿ
      - å›è°ƒåœ°å€
         
